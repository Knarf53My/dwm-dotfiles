--- a/dwm.c
+++ b/dwm.c
@@ -40,6 +40,10 @@
 
 #include <X11/XF86keysym.h>
 
+static unsigned int gappih = 10; /* horiz inner gap between windows */
+static unsigned int gappiv = 10; /* vert inner gap between windows */
+static unsigned int gappoh = 10; /* horiz outer gap between windows and screen edge */
+static unsigned int gappov = 10; /* vert outer gap between windows and screen edge */
 
 typedef struct {
    const char *symbol;
@@ -220,6 +224,32 @@
 }
 
 void
+setgaps(const Arg *arg)
+{
+    if (arg->i == 0) {
+        gappih = gappiv = gappoh = gappov = 0;
+    } else {
+        gappih += arg->i;
+        gappiv += arg->i;
+        gappoh += arg->i;
+        gappov += arg->i;
+        if (gappih < 0) gappih = 0;
+        if (gappiv < 0) gappiv = 0;
+        if (gappoh < 0) gappoh = 0;
+        if (gappov < 0) gappov = 0;
+    }
+    arrange(selmon);
+}
+
+void
 tile(Monitor *m)
 {
     unsigned int i, n, h, mw, my, ty;
@@ -227,6 +257,8 @@
 
     for (n = 0, c = nexttiled(m->clients); c; c = nexttiled(c->next))
         n++;
+
+    if (n == 0) return;
 
     if (n > m->nmaster)
         mw = m->nmaster ? (m->ww - m->gappx) * m->mfact : 0;
@@ -235,7 +267,9 @@
         mw = m->ww - m->gappx;
 
     for (i = my = ty = 0, c = nexttiled(m->clients); c; c = nexttiled(c->next)) {
-        if (i < m->nmaster) {
+        if (i < m->nmaster) { /* master */
+            h = (m->wh - (n > 1 ? gappih : 0)) * (1.0 / m->nmaster);
+            resize(c, m->wx + gappov, m->wy + gappoh + my, mw - gappov*2, h - gappih, 0);
             my += HEIGHT(c);
         } else { /* stack */
             h = (m->wh - (n > 1 ? gappih : 0)) * (1.0 / (n - m->nmaster));
@@ -243,6 +277,8 @@
             ty += HEIGHT(c);
         }
     }
+
+    arrange(m);
 }
